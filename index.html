<!-- To start on local host: https://stackoverflow.com/questions/10752055/cross-origin-requests-are-only-supported-for-http-error-when-loading-a-local-->
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>ASR Report</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"/>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
        <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
    </head>
    <body>
       <div class="container">
           <div class="table-responsive">
               <h1 align="center">ASR Report</h1>
               <br>
               <div align="center">
                <label for="mon">Month</label>
                <select class="mon" id="mon">
                    <option value=""></option>
                    <option value="January">January</option>
                    <option value="February">February</option>
                    <option value="March">March</option>
                    <option value="April">April</option>
                    <option value="May">May</option>
                    <option value="June">June</option>
                    <option value="July">July</option>
                    <option value="August">August</option>
                </select>
               </div>
               <div align="center">
                    <label for="year">Year</label>
                    <select class="year" id="year">
                        <option value=""></option>
                        <option value="2016">2016</option>
                        <option value="2017">2017</option>
                        <option value="2018">2018</option>
                        <option value="2019">2019</option>
                    </select>
                </div>
               <br>
               <div align="center">
                   <button type="button" name="load_data" id="load_data" class="btn btn-info">Load Data</button>
               </div>
               <br>
               <div id="asr_table">

               </div>
               <div id="text">
                   <p id="textp"></p>
               </div>
           </div>
       </div>

       <script>
           var selected;
           $(document).ready(function() {
                $('select.mon').change(function(){
                    selected = $('.mon option:selected').val();
                });
                $('select.year').change(function(){
                    selected += $('.year option:selected').val();
                });
               $('#load_data').click(function() {
                    $.ajax({
                        url:"data.csv",
                        dataType: "text",
                        success: function(data) {
                            var asr_data = data.split(/\r?\n|\r/);
                            var table_data = '<table class="table table-bordered table-striped">';
                            for(var count = 0; count < asr_data.length; count++) {
                                var cell_data = asr_data[count].split(",");
                                table_data += '<tr>';
                                for(var cell_count = 0; cell_count < cell_data.length; cell_count++) {
                                    if(count === 0) {
                                        table_data += '<th>' + cell_data[cell_count] + '</th>';
                                    } else {
                                        table_data += '<td>' + cell_data[cell_count] + '</td>';
                                    }
                                }
                                table_data += '</tr>';
                            }
                            table_data += '</table>';
                            $('#asr_table').html(table_data);
                        }
                    });
               });
           });
            
       </script>
    </body>
</html>